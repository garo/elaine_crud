<%# Per-page selector dropdown %>
<div class="flex items-center space-x-2">
  <label for="per_page_select" class="text-sm text-gray-700">Show:</label>
  <select id="per_page_select"
          name="per_page"
          class="block w-20 pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"
          onchange="this.form.submit()">
    <% [10, 25, 50, 100].each do |option| %>
      <option value="<%= option %>" <%= 'selected' if per_page == option %>>
        <%= option %>
      </option>
    <% end %>
  </select>
  <span class="text-sm text-gray-700">per page</span>
</div>

<script>
  // Handle form submission via Turbo
  document.addEventListener('DOMContentLoaded', function() {
    const select = document.getElementById('per_page_select');
    if (select) {
      select.addEventListener('change', function() {
        const currentUrl = new URL(window.location.href);
        currentUrl.searchParams.set('per_page', this.value);
        currentUrl.searchParams.delete('page'); // Reset to page 1 when changing per_page
        window.location.href = currentUrl.toString();
      });
    }
  });
</script>
